@using PagedList.Mvc;
@model PagedList.IPagedList<Negocio.Entidades.E_Libros>

@{
    Layout = null;
}


<!DOCTYPE html>


<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, user-scalable=no, maximum-scalable=1.0, minimum-scalable=1.0">
    <meta name="description" content="">
    <meta name="author" content="TemplateMo">


    <title>Editorial Humus</title>
    <link rel="icon" type="image/png" sizes="16x16" href="~/Recursos/Plantilla/assets/images/logo1.png">







    <!-- Bootstrap core CSS -->
    <link href="~/Recursos/PlantillaWeb/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="~/Recursos/PlantillaWeb/assets/css/fontawesome.css">
    <link rel="stylesheet" href="~/Recursos/PlantillaWeb/assets/css/templatemo-finance-business.css">

    <link rel="stylesheet" href="~/Recursos/PlantillaWeb/assets/css/esfil.css">

    @*<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">*@

    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">


    <!-- Additional CSS Files -->

    <link rel="stylesheet" href="~/Recursos/PlantillaWeb/assets/css/owl.css">

    <link rel="stylesheet" type="text/css" href="~/Content/PagedList.css">



    <style>
    </style>


</head>

<body>




    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->
    <!-- Header -->






    <header class="">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="@Url.Action("Inicio", "Editorial")"><h2 style="color: #4DBB6D;">EDITORIAL HUMUS</h2></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="@Url.Action("Inicio", "Editorial")" style="color: black;">
                                <i class="fa fa-home"> Inicio</i>
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="@Url.Action("Busqueda", "Editorial")" style="color: #4DBB6D;"><i class="fa fa-sliders">   Búsqueda Filtrada</a></i>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link" href="@Url.Action("Titulos", "Editorial")" title="Libros" style="color:black"><i class="fa fa-book"> Libros</i> </a>

                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="@Url.Action("Noticias", new RouteValueDictionary(new { controller = "Editorial", action = "Noticias", pag =1 }))" style="color: black;"><i class="fa fa-newspaper-o"> Noticias</a></i>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="@Url.Action("Contacto", "Editorial")" style="color: black;"><i class="fa fa-envelope"> Contáctenos</a></i>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>



    <!-- Page Content -->
    <div class="page-heading header-text">
        <div class="container">
            <div class="row">
                <div class="col-md-12">

                </div>
            </div>
        </div>
    </div>





    <div class="single-services">
        <div class="container">
            <div class="row" id="tabs1">
                <div _ngcontent-c2="" class="col-md-12" role="none" style="margin-top:-3%">
                    <center>
                        <b>
                            <h2 _ngcontent-c2="" style="color: #4DBB6D;">
                                <i _ngcontent-c2="" class="fa fa-sliders"></i>
                                Búsqueda filtrada
                            </h2>
                        </b>
                    </center>
                </div>
            </div><br>

            <div class="wrap" style="margin-top:-3%">
                <h1>
                </h1>

                <div class="container-fluid">


                    <div class="col-md-12 ">

                        @*class="d-flex justify-content-center"*@
                        @using (Html.BeginForm("Busqueda", "Editorial", FormMethod.Get))
                        {
                            @*<form style="margin-top:-3%" id="root">*@
                            <div class="row" style="margin-top:-3%">
                                <div class="col-md-12" style="margin-bottom:1%">
                                    <small class="text-muted text-justify">Para buscar libros seleccione el tipo de búsqueda y luego registre o seleccione los campos correpondientes de acuerdo al tipo de búsqueda seleccionado.</small>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-8">
                                    <label class="text-secondary"><b>Buscador</b></label>
                                    <input class="form-control me-2 " type="search" placeholder="Término a buscar..." aria-label="Search" style="border-color:#4DBB6D" id="buscador" name="buscador" value="@ViewBag.buscador">
                                </div>
                                <div class="col-md-4">
                                    <label class="text-secondary"><b>Número de registros</b></label>
                                    <select name="PageSize" id="PageSize" class="form-control required form-control me-2 text-secondary" for="position-top-right" style="border-color:#4DBB6D">

                                        <option @if ((int)ViewBag.PageSize == 5) { @Html.Raw("selected") } value="5">5</option>
                                        <option @if ((int)ViewBag.PageSize == 10) { @Html.Raw("selected") } value="10">10</option>
                                        <option @if ((int)ViewBag.PageSize == 15) { @Html.Raw("selected") } value="15">15</option>
                                        <option @if ((int)ViewBag.PageSize == 20) { @Html.Raw("selected") } value="20">20</option>
                                        <option @if ((int)ViewBag.PageSize == 50) { @Html.Raw("selected") } value="50">50</option>
                                        <option @if ((int)ViewBag.PageSize == 100) { @Html.Raw("selected") } value="100">100</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row" style="margin-top:1%">
                                <div class="col-md-12">
                                    <label class="text-secondary"><b>Filtros de búsqueda</b></label>
                                </div>
                            </div>

                            <div class="row" style="margin-top:-1%">
                                <div class="col-md-4">

                                    <label class="text-success"><small>Carreras</small></label>
                                    <select id="idcarrera" name="idcarrera" class="required form-control me-2 text-secondary" for="position-top-right" style="border-color:#4DBB6D">
                                        @*<option value="0">Seleccione carrera</option>*@
                                        <option @if (ViewBag.idcarrera == 0) { @Html.Raw("selected") } value="0">Seleccione carrera</option>

                                        @foreach (var item1 in ViewBag.Carreras)
                                        {
                                            <option @if (ViewBag.idcarrera == item1.IDcarrera) { @Html.Raw("selected") } value="@item1.IDcarrera">@item1.Carrera</option>

                                        }


                                    </select>
                                </div>
                                <div class="col-md-2">

                                    <label class="text-success"><small>Año de publicación</small></label>

                                    <input class="form-control me-2" type="number" placeholder="Año..." style="border-color:#4DBB6D" id="yearp" name="yearp" value="@ViewBag.yp" />
                                </div>
                                <div class="col-md-2">

                                    <label class="text-success"><small>Categoría</small></label>
                                    <select id="idcate" name="idcate" class="required form-control text-secondary" for="position-top-right" style="border-color:#4DBB6D">

                                        <option @if (ViewBag.idcate == 0) { @Html.Raw("selected") } value="0">Seleccione categoría</option>
                                        @foreach (var item1 in ViewBag.Categorias)
                                        {
                                            <option @if (ViewBag.idcate == item1.IDcategoria) { @Html.Raw("selected") } value="@item1.IDcategoria">@item1.Detallecategoria</option>

                                        }


                                    </select>
                                </div>
                                <div class="col-md-2">

                                    <label class="text-success"><small>Tipo de búsqueda</small></label>
                                    <select id="tipobusca" name="tipobusca" class="required form-control text-secondary" for="position-top-right" style="border-color:#4DBB6D">
                                        @*<option value="0">Seleccione tipo</option>*@
                                        <option @if (ViewBag.tbusca == 0) { @Html.Raw("selected") } value="0">Seleccione tipo</option>
                                        <option @if ((int)ViewBag.tbusca == 1) { @Html.Raw("selected") } value="1">Por todos los parámetros</option>
                                        <option @if ((int)ViewBag.tbusca == 2) { @Html.Raw("selected") } value="2">Por título</option>
                                        <option @if ((int)ViewBag.tbusca == 3) { @Html.Raw("selected") } value="3">Por código ISBN</option>
                                        <option @if ((int)ViewBag.tbusca == 4) { @Html.Raw("selected") } value="4">Por autor</option>
                                        <option @if ((int)ViewBag.tbusca == 5) { @Html.Raw("selected") } value="5">Por año de publicación</option>
                                        <option @if ((int)ViewBag.tbusca == 6) { @Html.Raw("selected") } value="6">Por carrera</option>
                                        <option @if ((int)ViewBag.tbusca == 7) { @Html.Raw("selected") } value="7">Por categoría</option>
                                        <option @if ((int)ViewBag.tbusca == 8) { @Html.Raw("selected") } value="8">Mostrar todos por carrera</option>
                                        <option @if ((int)ViewBag.tbusca == 9) { @Html.Raw("selected") } value="9">Mostrar todos por categoría</option>
                                        <option @if ((int)ViewBag.tbusca == 10) { @Html.Raw("selected") } value="10">Mostrar todos por año </option>



                                    </select>
                                </div>

                                <div class="col-md-2" style="margin-top:3.2%">

                                    <button class="btn btn-outline-success" type="submit" id="search" title="Buscar"> <i class="fa fa-search"></i> Buscar </button>
                                </div>
                            </div>






                            @*</form>*@

                        }



                    </div>


                    <div class="container" style="margin-top:5%">






                        <div class="col-12">
                            @*<section class='tabs-content '>*@



                            <article id='tabs-1' style="margin-left:-7%">


                                <section class="products-list tabs-content">

                                    <div class="col-md-12">

                                        @if (ViewBag.Alerta != null)
                                        {

                                            <small class="text-danger"><i class="fa fa-warning"></i> @ViewBag.Alerta</small>
                                            <small class="text-danger">Por defecto se muestran libros consultados por título.</small>


                                        }

                                        <div class="row">
                                            @if (Model.Count == 0)
                                            {


                                                <p>No se han encontrado resultados</p>
                                            }
                                            else
                                            {

                                                foreach (var item in Model)
                                                {

                                                    <div class="product-item" category="libro">
                                                        <a style="background-color: #fff" href="@item.UrlAcceso" title="@item.Titulo" target="_blank">
                                                            <img src="@item.Portada" alt="">
                                                        </a>

                                                    </div>


                                                }

                                            }



                                        </div>



                                        <div class="row">

                                            <p class="text-primary">Página @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) de @Model.PageCount</p>

                                        </div>
                                        <div class="row">
                                            <p class="text-primary">Total de registros @Model.TotalItemCount</p>
                                        </div>
                                        <div style="margin-left:-1%">

                                            @Html.PagedListPager(Model, page => Url.Action("Busqueda", "Editorial", new { buscador = ViewBag.buscador, page, PageSize = ViewBag.pagesize, idcarrera = ViewBag.idcarrera, idcate = ViewBag.idcate, yearp = ViewBag.yp, tipobusca = ViewBag.tbusca }))
                                        </div>

                                    </div>







                                </section>


                            </article>




                        </div>

                    </div>





                </div>
            </div>
        </div>
    </div>






    <br /><br /><br /><br />  <br /><br /><br /><br />

    <!-- Footer Starts Here -->



    <footer>
        @foreach (var item in ViewBag.DatosEditorial)
        {
            <div class="container" style="margin-top:-5%;margin-bottom:-5%">
                <div class="row">
                    <div class="col-md-3 footer-item">
                        <p style="color: #4DBB6D"><i class="fa fa-map-marker"></i> Dirección</p>
                        <p>@item.Direccion </p>
                        @*<ul class="menu-list">
                                <li><a href="#"></a></li>

                            </ul>*@
                    </div>
                    <div class="col-md-3 footer-item">
                        <p style="color: #4DBB6D"><i class="fa fa-clock-o "></i> Horario de atención</p>
                        <p>@item.Horario </p>

                    </div>
                    <div class="col-md-3 footer-item">
                        <p style="color: #4DBB6D"><i class="fa fa-phone"></i> Teléfono</p>
                        <p>@item.Telefono </p>

                    </div>
                    <div class="col-md-3 footer-item last-item">
                        <p style="color: #4DBB6D"><i class="fa fa-envelope-o"></i> Contáctenos</p>
                        <p>@item.Email </p>


                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-md-12 text-center">
                        <ul class="social-icons ">
                            <li><a rel="nofollow" href="#" target="_blank" style="background-color: #4DBB6D" title="Facebook"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#" target="_blank" style="background-color: #4DBB6D" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#" target="_blank" style="background-color: #4DBB6D" title="Instagram"><i class="fa fa-instagram"></i></a></li>
                            <li><a href="#" target="_blank" style="background-color: #4DBB6D" title="Youtube"><i class="fa fa-youtube"></i></a></li>
                        </ul>
                    </div>
                    @*#A4C639*@
                </div>
                <hr />
                <div class="row">
                    <small class="col-md-12 text-light text-center">


                        @{
                            string date = DateTime.Now.ToString("MM-dd-yyyy");
                            string year = date.Substring(6, 4);

                        }

                        <a href="http://www.espam.edu.ec/" target="_blank"> <img src="~/ImagesWeb/logo.png" alt="user" width="100"></a> Coordinación General de Investigación - Editorial Humus. © @year.


                    </small>
                </div>
            </div>
        }
    </footer>












    @*<script src="https://kit.fontawesome.com/a076d05399.js"></script>*@



    <!-- Bootstrap core JavaScript -->
    <script src="~/Recursos/PlantillaWeb/vendor/jquery/jquery.min.js"></script>
    <script src="~/Recursos/PlantillaWeb/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Additional Scripts -->
    <script src="~/Recursos/PlantillaWeb/assets/js/custom.js"></script>
    <script src="~/Recursos/PlantillaWeb/assets/js/owl.js"></script>
    <script src="~/Recursos/PlantillaWeb/assets/js/slick.js"></script>
    <script src="~/Recursos/PlantillaWeb/assets/js/accordions.js"></script>

    <script src="~/Recursos/PlantillaWeb/assets/js/script.js"></script>



    <script language="text/Javascript">

        cleared[0] = cleared[1] = cleared[2] = 0; //set a cleared flag for each field
        function clearField(t) {                   //declaring the array outside of the
            if (!cleared[t.id]) {                      // function makes it static and global
                cleared[t.id] = 1;  // you could use true and false, but that's more typing
                t.value = '';         // with more chance of typos
                t.style.color = '#fff';
            }
        }
    </script>

</body>
</html>
