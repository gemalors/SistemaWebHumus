@model IEnumerable<Negocio.Entidades.E_Procesos>

@{
    Layout = null;
}




<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sistema Web | Humus Editorial</title>
    <link rel="icon" type="image/png" sizes="16x16" href="~/Recursos/Plantilla/assets/images/logo1.png">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="~/Recursos/Plantilla/pluginsn/fontawesome-free/css/all.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="~/Recursos/Plantilla/distn/css/adminlte.min.css">

    <!-- Toastr -->
    <link rel="stylesheet" href="~/Recursos/Plantilla/pluginsn/toastr/toastr.min.css">


    <!-- Custom CSS -->
    <link href="~/Recursos/Plantilla/dist/css/style.min.css" rel="stylesheet">

    <!--sumernote-->
    <link rel="stylesheet" href="~/Recursos/Plantilla/pluginsn/summernote/summernote-bs4.min.css">



    <!--Sweetalert2-->
    <link rel="stylesheet" href="~/Recursos/Plantilla/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
    <link rel="stylesheet" type="text/css" href="~/Recursos/Plantilla/dist/css/sweetalert2.min.css">






</head>




@{

    var foto = "imgvacia.png";
    string Nombres = "";
    int Id = 0;

    foreach (var item9 in ViewBag.Usuario)
    {
        Nombres = item9.PrimerNombre+ " " + item9.ApellidoPrimero;
        Id = item9.IDusuario;
        if (item9.Foto != null)
        {

            //foto = Session["Foto"].ToString();
            foto = item9.Foto;
        }

    }


}


<!--modales-->
<!-- Modal editar autores -->
<div class="modal fade" id="exampleModalautor" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Datos de autor</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!--formulario-->
                <div class="card">
                    @using (Html.BeginForm("EditAutor", "Proceso", FormMethod.Post, new { @class = "form-horizontal" }))
                    {

                    <div class="card-body">

                        <input type="hidden" class="form-control" id="IDlibro" name="IDlibro">
                        <input type="hidden" class="form-control" id="Idproceso" name="Idproceso">
                        <input type="hidden" class="form-control" id="Idautor" name="Idautor">

                        <div class="form-group row">
                            <label for="fname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Primer nombre</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Nombre1" name="Nombre1" placeholder="Primer nombre..." required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="fname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Segundo nombre</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Nombre2" name="Nombre2" placeholder="Segundo nombre...">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname" class="col-sm-4 text-end control-label col-form-label text-info">
                             
                                Primer apellido:
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="ApellidoP" name="ApellidoP" required="" placeholder="Primer apellido...">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname" class="col-sm-4 text-end control-label col-form-label text-info">
                                
                                Segundo apellido:
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="ApellidoS" name="ApellidoS" placeholder="Segundo apellido...">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Cédula:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Cedula" name="Cedula" required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Email:</label>
                            <div class="col-sm-8">
                                <input type="email" class="form-control" id="Email" name="Email" required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="email1"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Teléfono:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Telefono" name="Telefono" placeholder="Teléfono..." required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="email1"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Dirección:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Direccion" name="Direccion" placeholder="Dirección..." required="">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="email1"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Filial:</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" id="Filial" name="Filial" required="" rows="4" cols="10"></textarea>

                            </div>
                        </div>

                    </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button type="submit" class="btn btn-info">Guardar</button>
                        </div>
                    }
                </div>
                <!--end formulario-->
            </div>

        </div>
    </div>
</div>



<!-- Modal editar titulo libro-->
<div class="modal fade" id="exampleModalt" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Editar título de libro</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!--formulario-->
                <div class="card">

                    <form>
                        <div class="card-body">
                            <div class="form-group row">
                                <input type="hidden" class="form-control" id="Idlibro" name="Idlibro">
                                <input type="hidden" class="form-control" id="Idproceso" name="Idproceso">
                                <input type="hidden" class="form-control" id="Tituloa" name="Tituloa">
                            </div>
                            <div class="form-group row">
                                <label for="fname"
                                       class="col-2 control-label col-form-label text-info">Título:</label>
                                <div class="col-10">
                                    <textarea class="form-control" id="Titulo" name="Titulo" rows="4" cols="10"></textarea>

                                </div>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button type="submit" class="btn btn-info" onclick="EditarTitulo()">Guardar cambio</button>
                        </div>
                    </form>

                </div>
                <!--end formulario-->
            </div>

        </div>
    </div>
</div>





<!-- Modal Agregar observaciones -->
<div class="modal fade" id="exampleModalobservacion1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Datos de observación</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!--formulario-->
                <div class="card">
                    @using (Html.BeginForm("AddObservacion", "Proceso", FormMethod.Post, new { @class = "form-horizontal" }))
                    {

                        <div class="card-body">

                            <input type="hidden" class="form-control" id="Idlibro1" name="Idlibro1">
                            <input type="hidden" class="form-control" id="Idproceso1" name="Idproceso1">


                            <div class="form-group row">
                                <label for="fname"
                                       class="col-sm-3 text-end control-label text-info col-form-label "><b class="text-danger">* </b>Título:</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="titulo" name="titulo" required="" placeholder="Título...">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="lname" class="col-sm-3 text-end text-info control-label col-form-label">

                                    Detalle:
                                </label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="detalle" name="detalle" placeholder="Detalle...">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="lname"
                                       class="col-sm-3 text-end control-label col-form-label text-info"><b class="text-danger">* </b>Descripción:</label>
                                <div class="col-sm-9">
                                    <textarea type="text" class="form-control" id="descrip" name="descrip" required="" placeholder="Descripción..." rows="10" cols="50"></textarea>

                                </div>
                            </div>

                            <input type="hidden" class="form-control" id="resp" name="resp" value="false">

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button type="submit" class="btn btn-info">Guardar</button>
                        </div>

                    }
                </div>
                <!--end formulario-->
            </div>

        </div>
    </div>
</div>







<!-- Modal registrar autores -->
<div class="modal fade" id="exampleModalautor1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Datos de autor</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!--formulario-->
                <div class="card">
                    @using (Html.BeginForm("AddAutor", "Proceso", FormMethod.Post, new { @class = "form-horizontal" }))
                    {

                    <div class="card-body">


                        <input type="hidden" class="form-control" id="IDlibro" name="IDlibro" value="@ViewBag.Idlibro">
                        <input type="hidden" class="form-control" id="Idproceso" name="Idproceso" value="@ViewBag.Idproceso">


                        <div class="form-group row">
                            <label for="fname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Primer nombre</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Nombre1" name="Nombre1" placeholder="Primer nombre..." required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="fname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Segundo nombre</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Nombre2" name="Nombre2" placeholder="Segundo nombre...">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname" class="col-sm-4 text-end control-label col-form-label text-info">

                                Primer apellido:
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="ApellidoP" name="ApellidoP" required="" placeholder="Primer apellido...">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname" class="col-sm-4 text-end control-label col-form-label text-info">
                             
                                Segundo apellido:
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="ApellidoS" name="ApellidoS"  placeholder="Segundo apellido...">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Cédula:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Cedula" name="Cedula" placeholder="Cédula de autor..." required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="lname"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Email:</label>
                            <div class="col-sm-8">
                                <input type="email" class="form-control" id="Email" name="Email"  placeholder="Email de autor..." required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="email1"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Teléfono:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Telefono" name="Telefono" placeholder="Teléfono de autor..." required="">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="email1"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Dirección:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="Direccion" name="Direccion" placeholder="Dirección de autor..." required="">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="email1"
                                   class="col-sm-4 text-end control-label col-form-label text-info">Filial:</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" id="Filial" name="Filial"  rows="4" cols="10" placeholder="Filial de autor..." required=""></textarea>

                            </div>
                        </div>

                    </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button type="submit" class="btn btn-info">Guardar</button>
                        </div>
                    }
                </div>
                <!--end formulario-->
            </div>

        </div>
    </div>
</div>




<!-- Modal registrar mensaje  -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Datos de mensaje</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!--formulario-->
                <div class="card">
                    <form>
                        <div class="card-body">
                            <input type="hidden" class="form-control" id="Id" name="Id" value="@Id">
                      
                            <div class="form-group row" style="margin-top:5%">
                                <label for="fname"
                                       class="col-lg-2 text-start control-label col-form-label text-info">Asunto:</label>
                                <div class="col-lg-10">
                                    <input type="text" class="form-control" id="asunto" name="asunto" placeholder="Asunto...">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="lname" class="col-lg-2 text-start control-label col-form-label text-info">

                                    Mensaje:
                                </label>
                                <div class="col-lg-10">
                                    <textarea type="text" class="form-control" id="mensaje" name="mensaje" rows="10" cols="50" placeholder="Descripción..." required=""></textarea>

                                </div>
                            </div>



                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button type="submit" class="btn btn-info" onclick="EnviarMensaje()">Guardar</button>
                        </div>
                    </form>
                </div>
                <!--end formulario-->
            </div>

        </div>
    </div>
</div>















<body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
         data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->





        <header class="topbar" data-navbarbg="skin5">

            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header" data-logobg="skin5">

                    <!-- ============================================================== -->
                    <!-- Logo -->
                    <!-- ============================================================== -->
                    <a class="navbar-brand" href="@Url.Action("IndexAutor", "Usuario")">
                        <!-- Logo icon -->
                        <b class="logo-icon ps-3">
                            <!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
                            <!-- Dark Logo icon -->
                            @*<img src="~/Recursos/Plantilla/assets/images/iconw.png" alt="homepage" class="light-logo" />*@
                            <i class="mdi mdi-f5da mdi-book-open-page-variant text-secondary"></i>

                        </b>
                        <!--End Logo icon -->
                        <!-- Logo text -->
                        <span class="logo-text">
                            <!-- dark Logo text -->
                            @*<img src="~/Recursos/Plantilla/assets/images/title2.png" alt="homepage" class="light-logo" />*@

                            <span class="hide-menu text-secondary" style="padding-left: 5%; padding-right: 10%"> Sistema Web Humus</span>



                        </span>
                        <!-- Logo icon -->
                        <!-- <b class="logo-icon"> -->
                        <!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
                        <!-- Dark Logo icon -->
                        <!-- <img src="~/Recursos/Plantilla/assets/images/logo-text.png" alt="homepage" class="light-logo" /> -->
                        <!-- </b> -->
                        <!--End Logo icon -->
                    </a>
                    <!-- ============================================================== -->
                    <!-- End Logo -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- Toggle which is visible on mobile only -->
                    <!-- ============================================================== -->
                    <a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)">
                        <i class="ti-menu ti-close"></i>
                    </a>
                </div>
                <!-- ============================================================== -->
                <!-- End Logo -->
                <!-- ============================================================== -->
                <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin5">
                    <!-- ============================================================== -->
                    <!-- toggle and nav items -->
                    <!-- ============================================================== -->
                    <ul class="navbar-nav float-start me-auto">
                        <li class="nav-item d-none d-lg-block">
                            <a class="nav-link sidebartoggler waves-effect waves-light" href="javascript:void(0)"
                               data-sidebartype="mini-sidebar"><i class="mdi mdi-menu font-24"></i></a>
                        </li>

                    </ul>
                    <!-- ============================================================== -->
                    <!-- Right side toggle and nav items -->
                    <!-- ============================================================== -->

                    <ul class="navbar-nav float-end">

                        <!--inicio-->
                        <li class="nav-item dropdown">

                            @if (@ViewBag.NuevasNotificaciones == 1)
                            {
                                <a class="nav-link dropdown-toggle waves-effect waves-dark" id="idlista" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="@ViewBag.NuevasNotificaciones Notificación nueva">
                                    <i class="mdi mdi-bell font-24"></i>

                                    <span class="badge badge-info navbar-badge">@ViewBag.NuevasNotificaciones</span>


                                </a>
                            }
                            else
                            {
                                <a class="nav-link dropdown-toggle waves-effect waves-dark" id="idlista" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="@ViewBag.NuevasNotificaciones Notificaciones nuevas">
                                    <i class="mdi mdi-bell font-24"></i>
                                    @if (@ViewBag.NuevasNotificaciones != 0)
                                    {
                                        <span class="badge badge-info navbar-badge">@ViewBag.NuevasNotificaciones</span>
                                    }
                                </a>
                            }



                            <!--cambiar de aqui en adelante data-bs-auto-close="outside"   -->
                            <ul class="dropdown-menu dropdown-menu-end mailbox animated bounceInDown" aria-labelledby="idlista">

                                <li>
                                    <div class="">
                                        @if (@ViewBag.TotalNotificaciones == 1)
                                        {
                                            <span class="dropdown-item-title dropdown-header text-orange"><b>@ViewBag.TotalNotificaciones Notificación recibida</b></span>
                                        }
                                        else
                                        {
                                            <span class="dropdown-item-title dropdown-header  text-orange font-14 "><b>@ViewBag.TotalNotificaciones Notificaciones recibidas</b></span>
                                        }
                                        @foreach (var itemn in ViewBag.Notificaciones)
                                        {
                                            <a href="@Url.Action("NotificacionesAutor", "Usuario")" class="dropdown-item text-secondary font-14" id="Id+@itemn.IDnotificacion">

                                                <i class="fas fa-@itemn.Icono mr-2"></i> @itemn.DetalleNotificacion
                                                @*<span class="float-right text-muted text-sm" id="p" onclick="EliminarNoti(@itemn.IDtipoNotificacion)"> <i class="mdi mdi- f156 mdi-close"></i></span>*@


                                            </a>
                                        }



                                        <a href="@Url.Action("NotificacionesAutor", "Usuario")" class="link align-right" style="margin-top:3%">
                                            <span class="dropdown-item dropdown-header align-right text-black text-12"><b>Ver todas las notificaciones </b></span>
                                        </a>
                                    </div>
                                </li>


                            </ul>
                            <!--fin de cambio aqui-->

                        </li>





                        <!--fin-->
                        <!-- ============================================================== -->
                        <!-- End Messages -->
                        <!-- ============================================================== -->
                        <!-- ============================================================== -->
                        <!-- User profile and search -->
                        <!-- ============================================================== -->


                        <li class="nav-item dropdown">
                            @*@{*@


                            @*//if (item9.Foto != null)
                            //{

                            //    //foto = Session["Foto"].ToString();
                            //    foto = item9.Foto;
                            //}*@




                            <a class="nav-link dropdown-toggle text-muted waves-effect waves-dark pro-pic" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="~/Recursos/Plantilla/assets/images/users/@foto" alt="user" class="rounded-circle" width="31">
                            </a>
                            @*}*@

                            <ul class="dropdown-menu dropdown-menu-end user-dd animated" aria-labelledby="navbarDropdown">

                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" onclick="Salir()">
                                    <i class="fa fa-power-off me-1 ms-1"></i> Cerrar sesión
                                </a>

                            </ul>
                        </li>
                        <!-- ============================================================== -->
                        <!-- User profile and search -->
                        <!-- ============================================================== -->
                    </ul>

                </div>
            </nav>
        </header>




        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->




        <aside class="left-sidebar" data-sidebarbg="skin5">
            <!-- Sidebar scroll-->
            <div class="scroll-sidebar">
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav">
                    <ul id="sidebarnav" class="pt-4">
                        <!--<ul id="sidebarnav" class="pt-0">-->
                        <li class="hide-menu">
                            <div style="margin-left:25%;margin-right:25%">
                                <a class="sidebar-link waves-effect waves-dark sidebar-link"
                                   aria-expanded="false"><img src="~/Recursos/Plantilla/assets/images/users/@foto" alt="user" class="rounded-circle" width="100"></a>

                            </div>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" style="padding-left: 25%; padding-right: 25%"
                               href="#" aria-expanded="false">
                                <span class="hide-menu">@Nombres</span>

                            </a>
                            <hr />
                        </li>

                        @*<li class="sidebar-item" style="margin-top:2%;">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link"
                               href="indexAdmin.html" aria-expanded="false">
                                <i class="mdi mdi-f1ee mdi-email"></i><span class="hide-menu">Mensajes</span>
                            </a>
                        </li>*@ @*class="mdi mdi-f104 mdi-camera-iris"*@
                        <li class="sidebar-item" style="margin-top:2%;">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link"
                               href="@Url.Action("Libros", "Libro")" aria-expanded="false">
                                <i class="mdi mdi-f332 mdi-library-books"></i><span class="hide-menu">Libros en proceso</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="@Url.Action("ListaLibrosArchivados", "Libro")" class="sidebar-link">
                                <i class="mdi mdi-f0bb mdi-book-multiple"></i><span class="hide-menu">
                                    Libros archivados
                                </span>
                            </a>
                        </li>
                        <li class="sidebar-item" style="margin-top:2%;">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link"
                               href="#" aria-expanded="false" data-bs-toggle="modal" data-bs-target="#exampleModal" data-toggle="tab">
                                <i class="mdi mdi-f184 mdi-comment-processing"></i><span class="hide-menu">Mensaje a Editorial</span>
                            </a>
                        </li>
                        <li class="sidebar-item" style="margin-top:2%;">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link"
                               aria-expanded="false" onclick="Solicitarlibro(@Id)">
                                <i class="mdi mdi-f0c5 mdi-bookmark-plus"></i><span class="hide-menu">Agregar nuevo libro</span>
                            </a>
                        </li>
                        <li class="sidebar-item" style="margin-top:2%;">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link"
                               href="@Url.Action("NotificacionesAutor", "Usuario")" aria-expanded="false">
                                <i class="mdi mdi-f09a mdi-bell"></i><span class="hide-menu">Notificaciones</span>
                            </a>
                        </li>



                        <li class="sidebar-item" style="margin-top:2%;">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link"
                               href="@Url.Action("EditperfilAutor", "Usuario")" aria-expanded="false">
                                <i class="mdi mdi-f631 mdi-account-settings-variant"></i><span class="hide-menu">Perfil</span>
                            </a>
                        </li>
                        <li class="sidebar-item" style="margin-top:2%;">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link"
                               onclick="Salir()" aria-expanded="false">
                                <i class="mdi mdi-f012 mdi-account-off"></i><span class="hide-menu">Salir</span>
                            </a>
                        </li>


                    </ul>
                </nav>
                <!-- End Sidebar navigation -->
            </div>
            <!-- End Sidebar scroll-->
        </aside>




        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb">
                <div class="row">
                    <div class="col-12 d-flex no-block align-items-center">
                        <h4 class="page-title">Detalle de proceso</h4>
                        <div class="ms-auto text-end">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    @*<li class="breadcrumb-item"><a href="#"></a></li>
                                <li class="breadcrumb-item active" aria-current="page"></li>*@
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->

            <div class="container-fluid">



                @foreach (var item1 in Model)
                {

                    <section class="content">

                        <!-- Default box -->


                        <div class="col-md-12">


                            <div class="card ">

                                <div class="card-header p-2">
                                    <ul class="nav nav-pills">

                                        <li class="nav-item"><a class="nav-link active" href="#activity" data-toggle="tab"><i class="mdi mdi-f61d mdi-dictionary"></i> Información</a></li>

                                        <li class="nav-item"><a class="nav-link" href="#comentarios" data-toggle="tab"><i class="mdi mdi-f184 mdi-comment-processing"></i> Comentarios</a></li>

                                        <li class="nav-item "><a class="nav-link " href="#documentos" data-toggle="tab"><i class="mdi mdi-f21a mdi-file-document-box mb-1 font-16"></i> Documentos enviados</a></li>
                                        <li class="nav-item "><a class="nav-link " href="#documents2" data-toggle="tab"><i class="mdi mdi-f222 mdi-file-multiple"></i> Documentos recibidos</a></li>
                                        <li class="nav-item "><a class="nav-link " href="#observaciones" data-toggle="tab"><i class="mdi mdi-f14c mdi-clipboard-check"></i> Observaciones</a></li>


                                        @if ( item1.VEnviarProcesoRevision==true)
                                        {
                                            <li class="nav-item "><a class="nav-link " href="@Url.Action("EnviarRevision1", new RouteValueDictionary(new { controller = "Proceso", action = "EnviarRevision1", IDlibro = @item1.Idlibro, Idproceso = @item1.IDproceso,Op=@item1.Opresultado,progresoL=item1.ProgresoL}))"><i class="mdi mdi-f14e mdi-clipboard-text"></i> Enviar proceso a revisión</a></li>
                                        }
                                        @if (item1.IdentificaEstado==3 && item1.VEnviarRevisionReversado==true)
                                        {
                                            <li class="nav-item "><a class="nav-link " href="@Url.Action("EnviarRevision2", new RouteValueDictionary(new { controller = "Proceso", action = "EnviarRevision2", IDlibro = @item1.Idlibro, Idproceso = @item1.IDproceso,progresoL=item1.ProgresoL}))"><i class="mdi mdi-f14e mdi-clipboard-text"></i> Enviar proceso a revisión</a></li>

                                        }
                                        @if (item1.Identificador <= 4 && item1.IdentificaEstado!=8)
                                        {
                                            <li class="nav-item "><a class="nav-link " onclick="ValidarDatos1(@item1.Idlibro,'@item1.Titulo',@item1.IDproceso)" data-bs-toggle="modal" data-bs-target="#exampleModalt"><i class="mdi mdi-f3ec mdi-pencil-box"></i> Editar titulo de libro</a></li>
                                        }

                                        @if (item1.Identificador != 1)
                                        {

                                            <li class="nav-item "><a class="nav-link " href="@Url.Action("VerProcesoAutor", new RouteValueDictionary(new { controller = "Proceso", action = "VerProcesoAutor", Idlibro = @item1.Idlibro, Idproceso = @ViewBag.Idpanterior}))"><i class="mdi mdi-f6c0 mdi-arrow-left-box"></i> Ver proceso anterior</a></li>
                                        }

                                    </ul>
                                </div><!-- /.card-header -->



                                <div class="card-body">
                                    <div class="tab-content">
                                        <div class="active tab-pane" id="activity">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-12 col-md-12 col-lg-7 order-2 order-md-1">
                                                        <div class="row">
                                                            <div class="col-12 col-sm-4">
                                                                <div class="info-box bg-gray">
                                                                    <div class="info-box-content">
                                                                        <span class="info-box-text text-center text-light">Proceso </span>
                                                                        <span class="info-box-number text-center text-light mb-0">@item1.Detalletipospro</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-4">
                                                                <div class="info-box bg-gray">
                                                                    <div class="info-box-content">
                                                                        <span class="info-box-text text-center text-light">Tiempo estimado </span>
                                                                        <span class="info-box-number text-center text-light mb-0">@item1.Duracionproceso laborables</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-4">
                                                                <div class="info-box bg-gray">
                                                                    <div class="info-box-content">
                                                                        <span class="info-box-text text-center text-light">Estado Actual</span>
                                                                        <span class="info-box-number text-center text-light mb-0">@item1.Estado_Proceso</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="margin-bottom:5%"></div>






                                                            <div class="col-12 col-md-12 col-lg-12 order-2 order-md-1">

                                                            @if (ViewBag.MensajeProceso.Count != 0) { 

                                                             foreach(var itemM in ViewBag.MensajeProceso)
                                                            {
                                                                 <p class="text-dark" style="margin-left:2.5%; margin-bottom:2%">@itemM.DescripcionMensaje</p>
                                                            }
                                                                }

                                                                @if (item1.VRequerimientosAutor==true && ViewBag.Requerimientoproceso.Count!=0)
                                                                {

                                                                    <div style="margin-bottom:1%; margin-left:3%">
                                                                        <b class="d-block text-info">Requerimientos para este proceso</b>
                                                                    </div>
                                                                    <p class="text-secondary text-black text-justify" style="margin-left:3%">
                                                                        Formatos de archivos aceptados: doc, docx, pdf, rtf
                                                                    </p>
                                                                    foreach (var item6 in ViewBag.Requerimientoproceso)
                                                                    {

                                                                        <!-- SELECT2 EXAMPLE -->
                                                                        using (Html.BeginForm("GuardarRequerimientodeprocesoAutor", "Proceso", FormMethod.Post, new { @class = "form - horizontal", enctype = "multipart/form-data" }))
                                                                        {
                                                                            <div class="card collapsed-card ">
                                                                                <div class="card-header">
                                                                                    <a class="text-info font-15"><i class="mdi mdi-f219 mdi-file-document"></i> @item6.Detallerequerimiento</a>

                                                                                    <div class="card-tools">
                                                                                        <button type="button" class="btn btn-tool text-muted font-12" data-card-widget="collapse">
                                                                                            <i class="fas fa-plus"></i>
                                                                                        </button>
                                                                                        <button type="button" class="btn btn-tool text-muted font-12" data-card-widget="remove">
                                                                                            <i class="fas fa-times"></i>
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                                <!-- /.card-header -->
                                                                                <div class="card-body">
                                                                                    <div class="row">
                                                                                        <div class="col-md-12">
                                                                                            <input type="hidden" class="form-control" id="Idtipoproceso" name="Idtipoproceso" value="@item1.Idtipoproceso">
                                                                                            <input type="hidden" class="form-control" id="IDlibro" name="IDlibro" value="@item1.Idlibro">
                                                                                            <input type="hidden" class="form-control" id="Idproceso" name="Idproceso" value="@item1.IDproceso">
                                                                                            @*<input type="hidden" class="form-control" id="proceso" name="proceso" value="@item1.Detalletipospro">
                                                                                            <input type="hidden" class="form-control" id="progresoL" name="progresoL" value="@item1.ProgresoL">*@
                                                                                     
                                                                                            <input type="hidden" class="form-control" id="identificadorE" name="identificadorE" value="@item1.IdentificaEstado">
                                                                                            @*@*<input type="hidden" class="form-control" id="resultp" name="resultp" value="@item6.ResultadoProceso">*@
                                                                                            @*<input type="hidden" class="form-control" id="titulo" name="titulo" value="@item1.Titulo">*@

                                                                                            @if (item1.Idprocanterior == null)
                                                                                            {


                                                                                                <input type="hidden" class="form-control" id="Idpanterior" name="Idpanterior" value="0">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="hidden" class="form-control" id="Idpanterior" name="Idpanterior" value="@item1.Idprocanterior">
                                                                                            }




                                                                                            <input type="hidden" class="form-control" id="Idrequerimiento" name="Idrequerimiento" value="@item6.IDrequerimiento">
                                                                                            <input type="hidden" class="form-control" id="estadopro" name="estadopro" value="@item1.Estado_Proceso">




                                                                                            @*<div class="form-group">*@
                                                                                            <div class="form-group row">
                                                                                                <p id="descripcionrequerimiento" name="descripcionrequerimiento">@item6.Descripcionrequerimiento</p>
                                                                                                <label for="fname"
                                                                                                       class="col-sm-3 text-start text-info font-12 control-label col-form-label">Detalle:</label>
                                                                                                <div class="col-sm-9">
                                                                                                    @*<input type="text" class="form-control" id="Detalle" name="Detalle" disabled value="@item6.Detallerequerimiento" >*@
                                                                                                    <input type="text" class="form-control" id="Detalle" name="Detalle" disabled="" value="@item6.Detallerequerimiento">
                                                                                                </div>


                                                                                            </div>
                                                                                            <div class="form-group row">

                                                                                                @if (item6.Tipodato != "Ninguno")
                                                                                                {
                                                                                                    <label for="fname"
                                                                                                           class="col-sm-3 text-start text-info font-12 control-label col-form-label">Requerimiento:</label>
                                                                                                    if (item6.Tipodato == "file")
                                                                                                    {
                                                                                                        <div class="col-sm-9">
                                                                                                            <input type="@item6.Tipodato" class="form-control" id="Documento" name="Documento" required="">
                                                                                                        </div>
                                                                                                    }
                                                                                                    else if (item6.Tipodato == "textarea")
                                                                                                    {
                                                                                                        <div class="col-sm-9">
                                                                                                            <textarea class="form-control" id="observacion" name="observacion" required="" placeholder="Requerimiento..."></textarea>

                                                                                                        </div>
                                                                                                    }

                                                                                                    else
                                                                                                    {
                                                                                                        <div class="col-sm-9">
                                                                                                            <input type="@item6.Tipodato" class="form-control" id="observacion" name="observacion" required="" placeholder="Requerimiento...">
                                                                                                        </div>
                                                                                                    }
                                                                                                    if (item6.respuesta == "Si")
                                                                                                    {

                                                                                                        <div class="form-group row" style="margin-top:4%">
                                                                                                            <label for="fname"
                                                                                                                   class="col-sm-3 text-start text-info font-12 control-label col-form-label">Resultado:</label>
                                                                                                            <div class="col-sm-9">
                                                                                                                @foreach (var item8 in ViewBag.SeleccionRespuesta)
                                                                                                                {
                                                                                                                    <div class="form-check">
                                                                                                                        @if (item8.Idrequerimiento == item6.IDrequerimiento)
                                                                                                                        {
                                                                                                                            <input type="radio" class="form-check-input"
                                                                                                                                   id="op" name="op" value="@item8.IdrespSeleccion" required="">
                                                                                                                            <label class="form-check-label mb-0 text-secondary" for="customControlValidation1">
                                                                                                                                @item8.DetalleResp
                                                                                                                            </label>
                                                                                                                        }
                                                                                                                    </div>

                                                                                                                }
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <input type="hidden" class="form-check-input"
                                                                                                               id="op" name="op" value="0" required="">
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (item6.respuesta == "Si")
                                                                                                    {

                                                                                                        <div class="form-group row" style="margin-top:4%">
                                                                                                            <label for="fname"
                                                                                                                   class="col-sm-3 text-start text-info font-12 control-label col-form-label">Resultado:</label>
                                                                                                            <div class="col-sm-9">
                                                                                                                @foreach (var item8 in ViewBag.SeleccionRespuesta)
                                                                                                                {
                                                                                                                    <div class="form-check">
                                                                                                                        @if (item8.Idrequerimiento == item6.IDrequerimiento)
                                                                                                                        {
                                                                                                                            <input type="radio" class="form-check-input"
                                                                                                                                   id="op" name="op" value="@item8.IdrespSeleccion" required="">

                                                                                                                            <label class="form-check-label mb-0 text-secondary" for="customControlValidation1">
                                                                                                                                @item8.DetalleResp
                                                                                                                            </label>
                                                                                                                        }
                                                                                                                    </div>

                                                                                                                }



                                                                                                            </div>
                                                                                                        </div>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <input type="hidden" class="form-check-input"
                                                                                                               id="op" name="op" value="0" required="">
                                                                                                    }
                                                                                                }
                                                                                            </div>

                                                                                            @*</div>*@
                                                                                            <!-- /.form-group -->
                                                                                            <!-- /.form-group -->
                                                                                        </div>
                                                                                        <!-- /.col -->
                                                                                        <!-- /.col -->
                                                                                    </div>
                                                                                   
                                                                                   
                                                                                    
                                                                                        <button type="submit" class="btn btn-sm btn-primary text-light radio:2%"><i class="mdi mdi-f194 mdi-content-save-all"> Guardar</i></button>
                                                                                    

                                                                                    <!-- /.row -->
                                                                                </div>
                                                                                <!-- /.card-body -->

                                                                            </div>
                                                                        }
                                                                        <!-- /.card -->

                                                                    }



                                                                }



                                                                @if (item1.IdentificaEstado==3)
                                                                {
                                                                    <div style="margin-bottom:1%; margin-left:3%">
                                                                        <b class="d-block">Requerimientos para este proceso</b>
                                                                    </div>
                                                                    <p class="text-secondary text-black text-justify" style="margin-left:3%">
                                                                        Formatos de archivos aceptados: doc, docx, pdf, rtf
                                                                    </p>


                                                                    <!-- SELECT2 EXAMPLE -->
                                                                    using (Html.BeginForm("GuardarDocCorregido", "Proceso", FormMethod.Post, new { @class = "form - horizontal", enctype = "multipart/form-data" }))
                                                                    {
                                                                        <div class="card collapsed-card ">
                                                                            <div class="card-header">
                                                                                <a class="text-info font-15"><i class="mdi mdi-f219 mdi-file-document"></i> Borrador de libro corregido</a>

                                                                                <div class="card-tools">
                                                                                    <button type="button" class="btn btn-tool text-muted font-12" data-card-widget="collapse">
                                                                                        <i class="fas fa-plus"></i>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-tool text-muted font-12" data-card-widget="remove">
                                                                                        <i class="fas fa-times"></i>
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                            <!-- /.card-header -->
                                                                            <div class="card-body">
                                                                                <div class="row">
                                                                                    <div class="col-md-12">

                                                                                        <input type="hidden" class="form-control" id="IDlibro" name="IDlibro" value="@item1.Idlibro">
                                                                                        <input type="hidden" class="form-control" id="Idproceso" name="Idproceso" value="@item1.IDproceso">
                                                                                        <input type="hidden" class="form-control" id="Idtipoproceso" name="Idtipoproceso" value="@item1.Idtipoproceso">
                                                                                        @if (item1.Idprocanterior == null)
                                                                                        {


                                                                                            <input type="hidden" class="form-control" id="Idpanterior" name="Idpanterior" value="0">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="hidden" class="form-control" id="Idpanterior" name="Idpanterior" value="@item1.Idprocanterior">
                                                                                        }


                                                                                        @*<div class="form-group">*@
                                                                                        <div class="form-group row">
                                                                                            <p id="descripcionrequerimiento" name="descripcionrequerimiento">Agregue el documento correspondiente al borrador del libro corregido.</p>
                                                                                            <label for="fname"
                                                                                                   class="col-sm-3 text-start text-info font-12 control-label col-form-label">Detalle:</label>
                                                                                            <div class="col-sm-9">
                                                                                                <input type="text" class="form-control" id="Detalle" name="Detalle" required="" value="Libro corregido" disabled>
                                                                                            </div>
                                                                                            @*<div class="col-sm-9">
                                                                                            <input type="" class="form-control" id="Detalle" name="Detalle" required="" value="@item6.Detallerequerimiento">
                                                                                        </div>*@
                                                                                        </div>
                                                                                        <div class="form-group row">
                                                                                            <label for="fname"
                                                                                                   class="col-sm-3 text-start text-info font-12 control-label col-form-label">Requerimiento:</label>

                                                                                            <div class="col-sm-9">
                                                                                                <input type="file" class="form-control" id="Documento" name="Documento" required="">
                                                                                            </div>




                                                                                        </div>

                                                                                        @*</div>*@
                                                                                        <!-- /.form-group -->
                                                                                        <!-- /.form-group -->
                                                                                    </div>
                                                                                    <!-- /.col -->
                                                                                    <!-- /.col -->
                                                                                </div>

                                                                                <button type="submit" class="btn btn-sm btn-primary text-light radio:2%"><i class="mdi mdi-f194 mdi-content-save-all"> Guardar</i></button>
                                                                                <!-- /.row -->
                                                                            </div>
                                                                            <!-- /.card-body -->

                                                                        </div>
                                                                    }
                                                                    <!-- /.card -->

                                                                }










                                                            </div>





                                                        </div>
                               




                                                        @if (item1.IdentificaEstado==8)
                                                        {

                                                            <p class="text-info font-14 text-justify" style="margin-left:4%"> ¡ Este proceso ha finalizado correctamente ! </p>
                                                        }


                                                    </div>




                                                    <div class="col-12 col-md-12 col-lg-5 order-1 order-md-2">

                                                        @if (item1.IdentificaEstado == 8 && item1.Identificador == 7)
                                                        {

                                                            <div class="card">


                                                                <ul class="nav nav-tabs" role="tablist">
                                                                    <li class="nav-item">
                                                                        <a class="nav-link active" data-toggle="tab" href="#home"
                                                                           role="tab">
                                                                            <span class="hidden-sm-up"></span> <span class="hidden-xs-down">Portada de libro</span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="nav-item">
                                                                        <a class="nav-link" data-toggle="tab" href="#profile"
                                                                           role="tab">
                                                                            <span class="hidden-sm-up"></span> <span class="hidden-xs-down">Detalles de libro</span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="nav-item">
                                                                        <a class="nav-link" data-toggle="tab" href="#messages"
                                                                           role="tab">
                                                                            <span class="hidden-sm-up"></span><span class="hidden-xs-down">Autores</span>
                                                                        </a>
                                                                    </li>
                                                                </ul>



                                                                <div class="tab-content tabcontent-border">

                                                                    @foreach (var item4 in ViewBag.LibroDetalle)
                                                                    {
                                                                        <div class="tab-pane active" id="home" role="tabpanel">
                                                                            <div class="p-20">

                                                                                <img src="@item4.Portada" class="img-fluid">


                                                                            </div>
                                                                        </div>
                                                                        <div class="tab-pane  p-20" id="profile" role="tabpanel">
                                                                            <div class="p-20">

                                                                                <div class="text-secondary">
                                                                                    <p class="text-sm">
                                                                                        @item4.Titulo
                                                                                        <b class="d-block">Titulo</b>
                                                                                    </p>
                                                                                    <p class="text-sm">
                                                                                        @item4.CodigoISBN
                                                                                        <b class="d-block">Código ISBN</b>
                                                                                    </p>
                                                                                    <p class="text-sm">
                                                                                        @item4.Editorial
                                                                                        <b class="d-block">Editorial</b>
                                                                                    </p>
                                                                                    <p class="text-sm">
                                                                                        @item4.Fechapublica
                                                                                        <b class="d-block">Publicado</b>
                                                                                    </p>
                                                                                    <p class="text-sm">

                                                                                        <a href="@item4.Libro" class="btn btn-success text-light" target="_blank">

                                                                                            <i class="far fa-fw fa-file-pdf"></i>Ver Libro

                                                                                        </a>

                                                                                    </p>

                                                                                </div>


                                                                            </div>
                                                                        </div>
                                                                    }


                                                                    <div class="tab-pane" id="messages" role="tabpanel">
                                                                        <div class="p-20">


                                                                            @foreach (var item5 in ViewBag.Autores)
                                                                            {
                                                                                <div class="col-12 btn-group-sm">
                                                                                    <div class="row">
                                                                                        <div class="col-sm-10">

                                                                                            <div class="text-secondary">
                                                                                                <p class="text-sm">
                                                                                                    <i class="mdi mdi-f008 mdi-account-check"></i> <b>@item5.PrimerNombre @item5.ApellidoPrimero @item5.ApellidoSegundo</b>
                                                                                                    <small class="d-block text-secondary font-14" style="margin-left:7%">@item5.Email</small>
                                                                                                </p>


                                                                                            </div>



                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                            }


                                                                        </div>
                                                                    </div>
                                                                </div>


                                                                <!--/-->
                                                            </div>



                                                        }
                                                        else
                                                        {

                                                            <div class="col-12 col-sm-12">
                                                                <div class="info-box bg-gray">
                                                                    <div class="info-box-content">
                                                                        <span class="info-box-text text-center text-light">Libro </span>
                                                                        <span class="info-box-number text-center text-light mb-0">@item1.Titulo</span>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            @*<h3 class="text-cyan"> <i class="mdi mdi-f0bb mdi-book-multiple"></i>Libro:  @item3.Titulo</h3>*@
                                                            <div style="margin-bottom:10%"></div>


                                                            <div style="margin-bottom:2%;margin-top:5%">

                                                                <b class="d-block">Autores del Libro</b>
                                                            </div>


                                                            if (ViewBag.Autores.Count == 0)
                                                            {
                                                                <p class="text-secondary text-muted text-justify">
                                                                    <i class="mdi mdi-f028 mdi-alert-circle"></i> No hay información de autor(es) para mostrar aún!!!
                                                                </p>
                                                            }
                                                            foreach (var item4 in ViewBag.Autores)
                                                            {



                                                                <!--inicio-->
                                                                <div class="col-12 btn-group-sm">
                                                                    <div class="row">
                                                                        <div class="text-secondary">

                                                                            <span class="m-0 float-end">
                                                                                @if (item1.IdentificaEstado != 8 && item1.Identificador <= 4)
                                                                                {
                                                                                    <a href="" class="text-info" title="Agregar autor" data-bs-toggle="modal" data-bs-target="#exampleModalautor1" data-toggle="tab"><i class="fas fa-fas fa-user-plus"></i></a>
                                                                                    <a href="" class="text-success" title="Editar autor" onclick="ValidarDatosAutor(@item1.Idlibro,@item1.IDproceso,@item4.Idautor,'@item4.PrimerNombre','@item4.SegundoNombre','@item4.ApellidoPrimero','@item4.ApellidoSegundo','@item4.Email','@item4.Cedula','@item4.Telefono','@item4.Direccion','@item4.Filial')" data-bs-toggle="modal" data-bs-target="#exampleModalautor" data-toggle="tab"><i class="fas fa-fas fa-edit"></i></a>
                                                                                    <a class=" text-danger" title="Eliminar autor" onclick="EliminarAutor(@item4.Idautor,@item1.Idlibro,@item1.IDproceso)"><i class="fas fa-fas fa-trash-alt"></i></a>
                                                                                }

                                                                            </span>


                                                                            <p class="text-sm">
                                                                                <i class="mdi mdi-f008 mdi-account-check"></i> <b>@item4.PrimerNombre @item4.ApellidoPrimero @item4.ApellidoSegundo</b>
                                                                                <small class="d-block text-secondary font-14" style="margin-left:5%">@item4.Email</small>
                                                                            </p>


                                                                        </div>

      

                                                                    </div>
                                                                </div>

                                                                <!--fin-->




                                                            }


                                                        }




                                                    </div>
                                                </div>







                                            </div>
                                        </div>




                                        <!--comentarios-->
                                        <div class=" tab-pane" id="comentarios">


                                            <div class="card-body">
                                                <div class="row">

                                                    <div class="col-12">
                                                        <div class="card">

                                                            @if (ViewBag.Comentarios.Count == 0)
                                                            {
                                                                <p class="text-secondary text-muted text-justify">
                                                                    <i class="mdi mdi-f184 mdi-comment-processing"></i>No hay comentarios aún!!!
                                                                </p>
                                                            }

                                                            <div class="chat-box scrollable" style="height: 275px">
                                                                <!--chat Row -->
                                                                <!--chat Row -->
                                                                @foreach (var itemc in ViewBag.Comentarios)
                                                                {


                                                                    if (itemc.Idusuario != Id)
                                                                    {
                                                                        <div class="direct-chat-msg" style="margin-top:3%">
                                                                            <div class="direct-chat-infos clearfix">
                                                                                <span class="direct-chat-name float-left text-secondary"><b>@itemc.PrimerNombre @itemc.ApellidoPrimero</b></span>
                                                                                <span class="direct-chat-timestamp float-right text-secondary">@itemc.Fecha</span>
                                                                            </div>
                                                                            <!-- /.direct-chat-infos -->
                                                                            @{
                                                                                var foto1 = "imgvacia.png";

                                                                                if (itemc.Foto != null)
                                                                                {

                                                                                    foto1 = itemc.Foto;
                                                                                }

                                                                                <img class="direct-chat-img img-circle img-bordered-sm" src="~/Recursos/Plantilla/assets/images/users/@foto1" alt="message user image">
                                                                            }


                                                                            <!-- /.direct-chat-img -->
                                                                            <div class="direct-chat-text">
                                                                                @itemc.Comentario
                                                                            </div>
                                                                            <!-- /.direct-chat-text -->
                                                                        </div>


                                                                        <!-- /.direct-chat-msg -->
                                                                    }
                                                                    else
                                                                    {




                                                                        <!-- Message to the right -->
                                                                        <!--mensaje enviado-->

                                                                        <div class="direct-chat-msg right" style="margin-top:3%">
                                                                            <div class="direct-chat-infos clearfix">
                                                                                <span class="direct-chat-name float-right text-info"><b>@itemc.PrimerNombre @itemc.ApellidoPrimero</b></span>
                                                                                <span class="direct-chat-timestamp float-left text-info">@itemc.Fecha</span>
                                                                            </div>
                                                                            <!-- /.direct-chat-infos -->
                                                                            @{
                                                                                var foto2 = "imgvacia.png";

                                                                                if (itemc.Foto != null)
                                                                                {

                                                                                    foto2 = itemc.Foto;
                                                                                }
                                                                                <img class="direct-chat-img img-circle img-bordered-sm" src="~/Recursos/Plantilla/assets/images/users/@foto2" alt="message user image">
                                                                            }

                                                                            <!-- /.direct-chat-img -->
                                                                            <div class="direct-chat-text">
                                                                                @itemc.Comentario
                                                                                @if (item1.IdentificaEstado != 8)
                                                                                {
                                                                                    <a class="m-0 float-end text-info" title="Eliminar comentario" onclick="Eliminarcoment(@itemc.IDcomentario,@item1.Idlibro,@item1.IDproceso)"><i class="fas fa-trash"></i></a>
                                                                                }
                                                                            </div>
                                                                            <!-- /.direct-chat-text -->
                                                                        </div>
                                                                        <!-- /.direct-chat-msg -->
                                                                        <!-- Message. Default to the left -->

                                                                    }



                                                                }


                                                            </div>
                                                            <div class="card-footer">
                                                                @if (item1.IdentificaEstado != 8)
                                                                {
                                                                    <form>
                                                                        <div class="input-group">

                                                                            <input type="text" id="Comentario" placeholder="Agregue comentario ..." class="form-control" required="">
                                                                            <span class="input-group-append">
                                                                                <button type="submit" class="btn btn-info" onclick="Addcomentario(@item1.Idlibro,@item1.IDproceso)">Enviar</button>
                                                                            </span>
                                                                        </div>
                                                                    </form>
                                                                }
                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>
                                            </div>



                                        </div>







                                        <!--documentos enviados-->
                                        <div class=" tab-pane" id="documentos">
                                            <div class="active tab-pane" id="evaluar">
                                                <div class="card-body">
                                                    <div class="row">


                                                        @if (ViewBag.Documentosenviados.Count == 0)
                                                        {
                                                            <p class="text-secondary text-muted text-justify">
                                                                <i class="mdi mdi-f21a mdi-file-document-box"></i> No hay documentos para mostrar!!!
                                                            </p>
                                                        }


                                                        @if (ViewBag.Documentosenviados.Count != 0)
                                                        {

                                                            <div class="card-body p-0">
                                                                <table class="table-responsive-md table table-bordered table-striped">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="text-blue">Documento</th>
                                                                            <th class="text-blue">Detalle</th>
                                                                            <th class="text-blue">Registrado</th>

                                                                            <th></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                        @foreach (var item2 in ViewBag.Documentosenviados)
                                                                        {


                                                                        <tr>
                                                                            <td>@item2.Documento </td>
                                                                            <td>
                                                                                @item2.Detalledocu
                                                                            </td>

                                                                            <td>
                                                                                <small>@item2.Emisor </small>
                                                                                <br />

                                                                                <small> @item2.Fecha</small>
                                                                            </td>

                                                                           

                                                                            <td class="text-right py-0 align-middle">
                                                                                <div class="btn-group btn-group-sm">

                                                                                    <a href="~/Files/Documents/@item2.Documento" title="Descargar documento" class="btn btn-info" target="_blank" style="margin-right:5%"><i class="mdi mdi-f1da mdi-download"></i></a>

                                                                                    @if (item1.IdentificaEstado != 8)
                                                                                    {
                                                                                        <a class="btn btn-danger text-light" title="Eliminar documento" onclick="EliminarDoc(@item2.IDdocumento,@item1.Idlibro,@item1.IDproceso)"><i class="mdi mdi-f6cb mdi-delete-empty"></i></a>
                                                                                    }
                                                                                </div>
                                                                            </td>



                                                                        </tr>


                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        }



                                                    </div>
                                                </div>
                                            </div>

                                        </div>


                                        <!--documentos recibidos-->
                                        <div class=" tab-pane" id="documents2">
                                            <div class="active tab-pane" id="evaluar">
                                                <div class="card-body">
                                                    <div class="row">


                                                        @if (ViewBag.Documentosrecibidos.Count == 0)
                                                        {
                                                            <p class="text-secondary text-muted text-justify">
                                                                <i class="mdi mdi-f21a mdi-file-document-box"></i> No hay documentos para mostrar!!!
                                                            </p>
                                                        }


                                                        @if (ViewBag.Documentosrecibidos.Count != 0)
                                                        {
                                                            <div class="card-body p-0">
                                                                <table class="table-responsive-md table table-bordered table-striped">
                                                                    <thead>
                                                                        <tr>

                                                                            <th class="text-blue">Documento</th>
                                                                            <th class="text-blue">Detalle</th>
                                                                            <th class="text-blue">Registrado</th>

                                                                            <th></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                        @foreach (var item2 in ViewBag.Documentosrecibidos)
                                                                        {

                                                                            if (item2.EstadoDocu == "Enviado" || item2.EstadoDocu == "Revisado")
                                                                            {
                                                                        <tr>
                                                                            <td>@item2.Documento </td>
                                                                            <td>
                                                                                @item2.Detalledocu
                                                                            </td>

                                                                            <td>
                                                                                <small>@item2.Emisor </small>
                                                                                <br />

                                                                                <small> @item2.Fecha</small>
                                                                            </td>



                                                                            <td class="text-right py-0 align-middle">
                                                                                <div class="btn-group btn-group-sm">

                                                                                    <a href="~/Files/Documents/@item2.Documento" title="Descargar documento" class="btn btn-info" target="_blank" style="margin-right:5%"><i class="mdi mdi-f1da mdi-download"></i></a>


                                                                                </div>
                                                                            </td>



                                                                        </tr>


                                                                            }


                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        }




                                                    </div>
                                                </div>
                                            </div>



                                        </div>



                                        <!--observaciones-->
                                        <div class=" tab-pane" id="observaciones">
                                            <div class="active tab-pane" id="evaluar">

                                              
                                                <div class="card">
                                                  
                                                    <div class="card-body">
                                                        <div class="row">


                                                            @if (ViewBag.Observaciones.Count == 0)
                                                            {


                                                                <p class="text-secondary text-muted text-justify">
                                                                    <i class="mdi mdi-f21a mdi-file-document-box"></i> No hay observaciones para mostrar!!!
                                                                </p>

                                                                if (item1.IdentificaEstado != 8)
                                                                {
                                                                    <small>
                                                                        <a href="" class="text-info" title="Agregar observación" onclick="Datos(@item1.Idlibro,@item1.IDproceso)" data-bs-toggle="modal" data-bs-target="#exampleModalobservacion1" data-toggle="tab"><i class="fas fa-fas fa-plus"></i> Agregar observación</a>
                                                                    </small>
                                                                }
                                                            }

                                                            @foreach (var itemob in ViewBag.Observaciones)
                                                            {



                                                                    <div class="col-md-12">
                                                                    @if (itemob.EstadoObservacion == "Enviado" && itemob.VisibleAutor==true) { 
                                                                    <div class="card alert alert-success ">
                                                                        <div class="card-body">
                                                                            <h4 class="alert-heading">@itemob.Titulo</h4>

                                                                            <p>
                                                                                @itemob.Detalleobservacion
                                                                                <br />
                                                                                @Html.Raw(@itemob.Descripcionobservacion)

                                                                            </p>
                                                                            <small class="mb-0 float-end" style="margin-top:1%">
                                                                                @itemob.Emisor - @itemob.Fechaobservacion
                                                                            </small>

                                                                            <hr>
                                                                            <div class="col-3 btn-group-sm">
                                                                                <div class="row">
                                                                                    @if (item1.IdentificaEstado != 8)
                                                                                    {
                                                                                        <div class="col-sm-1" style="margin-right:5%">
                                                                                            <a href="#" class="text-info" title="Agregar observación" onclick="Datos(@item1.Idlibro,@item1.IDproceso)" data-bs-toggle="modal" data-bs-target="#exampleModalobservacion1" data-toggle="tab"><i class="fas fa-fas fa-edit"></i></a>

                                                                                        </div>
                                                                                        if (itemob.Emisor == Session["Nombres"].ToString())
                                                                                        {

                                                                                            <div class="col-sm-1">
                                                                                                <a class="text-danger" title="Eliminar observación" data-toggle="tab" onclick="EliminarObservacion(@itemob.IDObservacion,@item1.Idlibro,@item1.IDproceso)"><i class="fas fa-fas fa-trash-alt"></i></a>

                                                                                            </div>
                                                                                        }
                                                                                    }


                                                                                </div>


                                                                            </div>




                                                                        </div>
                                                                    </div>
                                                                }
                                                              
                                                                    </div>



                                                            }





                                                        </div>
                                                    </div>
                                                </div>


                                         


                                            </div>





                                        </div>


                                    </div>
                                </div>
                            </div>




                        </div>





                    </section>

                }
            </div>


            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <br />
            <footer class="footer text-center" style="margin-top:30%">
                @{
                    string date = DateTime.Now.ToString("MM-dd-yyyy");
                    string year = date.Substring(6, 4);

                }
                <img src="https://localhost:44329/ImagesWeb/logo.png" alt="user" width="100"> Coordinación General de Investigación - Editorial Humus. © @year.
            </footer>
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    </div>
        <!-- ============================================================== -->
        <!-- End Wrapper -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- All Jquery -->
        <!-- ============================================================== -->




        <script src="~/Recursos/Plantilla/assets/libs/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap tether Core JavaScript -->
        <script src="~/Recursos/Plantilla/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="~/Recursos/Plantilla/assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>

        <!-- Toastr -->
        <script src="~/Recursos/Plantilla/pluginsn/toastr/toastr.min.js"></script>

        <!--Wave Effects -->
        <script src="~/Recursos/Plantilla/dist/js/waves.js"></script>
        <!--Menu sidebar -->
        <script src="~/Recursos/Plantilla/dist/js/sidebarmenu.js"></script>
        <!--Custom JavaScript -->
        <script src="~/Recursos/Plantilla/dist/js/custom.min.js"></script>
        <!--This page JavaScript -->
        <!-- Bootstrap 4 -->
        <script src="~/Recursos/Plantilla/pluginsn/bootstrap/js/bootstrap.bundle.min.js"></script>
        <!-- AdminLTE App -->
        <script src="~/Recursos/Plantilla/distn/js/adminlte.min.js"></script>

        <!--sweetalert2-->
        <script src="~/Recursos/Plantilla/dist/js/sweetalert2.all.min.js"></script>
        <script src="~/Recursos/Plantilla/plugins/sweetalert2/sweetalert2.min.js"></script>


        <!-- Summernote -->
        <script src="~/Recursos/Plantilla/pluginsn/summernote/summernote-bs4.min.js"></script>

        <script>

            $(function () {
                //Add text editor
                $('#descrip').summernote()
            })

            $(function () {
                //Add text editor
                $('#mensaje').summernote('code', 'Mensaje...')
            })

        </script>



        <script>

         function Salir() {

        Swal.fire({
            title: '¿Estás seguro?',
            text: "¿Quieres cerrar sesión?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí, salir!',
            cancelButtonText:'Cancelar'
        }).then((result) => {
         if (result.isConfirmed) {

         var data = {

        }
        $.ajax({

            url: "@Url.Action("Logout", "Usuario")",
            type: 'POST',
            dataType: 'json',
            data: data,
            success: function (obj) {

                window.location.href = "@Url.Action("Login","Usuario")";
            }


        })


         }
        })

        }

        </script>



    </body>

</html>







<script>


        function ValidarDatos1(IDlibro, Titulo, IDproceso) {

            document.getElementById('Idlibro').value = IDlibro;
            document.getElementById('Titulo').value = Titulo;
            document.getElementById('Idproceso').value = IDproceso;
            document.getElementById('Tituloa').value = Titulo;


        }



        function ValidarDatosAutor(IDlibro, IDproceso, Idautor, PrimerNombre,SegundoNombre, ApellidoPrimero,ApellidoSegundo, Email, Cedula, Telefono, Direccion, Filial) {
            document.getElementById('IDlibro').value = IDlibro;
            document.getElementById('Idproceso').value = IDproceso;
            document.getElementById('Idautor').value = Idautor;
            document.getElementById('Nombre1').value = PrimerNombre;
            document.getElementById('Nombre2').value = SegundoNombre;
            document.getElementById('ApellidoP').value = ApellidoPrimero;
            document.getElementById('ApellidoS').value = ApellidoSegundo;
            document.getElementById('Email').value = Email;
            document.getElementById('Cedula').value = Cedula;
            document.getElementById('Telefono').value = Telefono;
            document.getElementById('Direccion').value = Direccion;
            document.getElementById('Filial').value = Filial;
        }






    function Eliminarcoment(IDcomentario,Idlibro,IDproceso) {
        var idlibro = Idlibro;
        var idproceso = IDproceso;




        Swal.fire({
            title: '¿Estás seguro?',
            text: "¿Quieres eliminar este comentario?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí, Eliminar!',
            cancelButtonText:'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {

                 var data = {

                     'Idcomentario': IDcomentario


        }
        $.ajax({

            url: "@Url.Action("EliminarComentario", "Proceso")",
            type: 'POST',
            dataType: 'json',
            data: data,

            success: function (obj) {



                window.location.href = "../Proceso/VerProcesoAutor?Idlibro=" + idlibro + "&Idproceso=" + idproceso + "";
            }


        })


            }
        })



        }




    function EliminarAutor(Idautor,Idlibro,IDproceso) {
        var idlibro = Idlibro;
        var idproceso = IDproceso;


        Swal.fire({
            title: '¿Estás seguro?',
            text: "¿Quieres eliminar este autor?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí, Eliminar!',
            cancelButtonText:'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {

                 var data = {

                     'idautor': Idautor


        }
        $.ajax({

            url: "@Url.Action("EliminarAutor", "Libro")",
            type: 'POST',
            dataType: 'json',
            data: data,

            success: function (obj) {



                window.location.href = "../Proceso/VerProcesoAutor?Idlibro=" + idlibro + "&Idproceso=" + idproceso + "";
            }


        })


            }
        })



        }








    function EliminarObservacion(IDObservacion,Idlibro,IDproceso) {
        var idlibro = Idlibro;
        var idproceso = IDproceso;


        Swal.fire({
            title: '¿Estás seguro?',
            text: "¿Quieres eliminar esta observación?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí, Eliminar!',
            cancelButtonText:'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {

                 var data = {

                     'Idobservacion': IDObservacion


        }
        $.ajax({

            url: "@Url.Action("EliminarObservacion", "Proceso")",
            type: 'POST',
            dataType: 'json',
            data: data,

            success: function (obj) {



                window.location.href = "../Proceso/VerProcesoAutor?Idlibro=" + idlibro + "&Idproceso=" + idproceso + "";
            }


        })


            }
        })



        }





        function Datos(Idlibro, IDproceso) {

            document.getElementById('Idproceso1').value = IDproceso;
            document.getElementById('Idlibro1').value = Idlibro;


        }










        function EliminarDoc(IDdocumento,Idlibro,IDproceso) {
        var idlibro = Idlibro;
        var idproceso = IDproceso;




        Swal.fire({
            title: '¿Estás seguro?',
            text: "¿Quieres eliminar este documento?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí, Eliminar!',
            cancelButtonText:'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {

                 var data = {

                     'IDdocu': IDdocumento


        }
        $.ajax({

            url: "@Url.Action("EliminarDocumento", "Proceso")",
            type: 'POST',
            dataType: 'json',
            data: data,

            success: function (obj) {

                window.location.href = "../Proceso/VerProcesoAutor?Idlibro=" + idlibro + "&Idproceso=" + idproceso + "";


            }


        })


            }
        })



        }





         function EditarTitulo() {

         var idlibro = document.getElementById('Idlibro').value;
         var idproceso = document.getElementById('Idproceso').value;
         var titulo1 = document.getElementById('Titulo').value;
         var tituloa = document.getElementById('Tituloa').value;



            var data = {
                'idlibro': idlibro,
                'titulo': titulo1,
                'tituloant': tituloa,


            }
            $.ajax({

                url: "@Url.Action("EditarTitulo", "Libro")",
                type: 'POST',
                dataType: 'json',
                data: data,
                success: function (obj) {
                    window.location.href = "../Proceso/VerProcesoAutor?Idlibro=" + idlibro + "&Idproceso=" + idproceso + "";



                }

            })



        }






        function Addcomentario(Idlibro,IDproceso) {


         var comentario1 = document.getElementById('Comentario').value;




            var data = {
                'idproceso': IDproceso,
                'Idlibro1':Idlibro,
                'comentario': comentario1


            }
            $.ajax({

                url: "@Url.Action("AgregarComentario", "Proceso")",
                type: 'POST',
                dataType: 'json',
                data: data,
                success: function (obj) {
                    window.location.href = "../Proceso/VerProcesoAutor?Idlibro=" + Idlibro + "&Idproceso=" + IDproceso + "";



                }

            })



        }



    function Solicitarlibro(Id) {

        Swal.fire({
            title: '¿Estás seguro?',
            text: "¿Quiere enviar solicitud para publicar nuevo libro?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí, enviar!',
            cancelButtonText:'Cancelar'
        }).then((result) => {
         if (result.isConfirmed) {

             var data = {
                 'idemisor': Id,

        }
        $.ajax({

            url: "@Url.Action("SolcitarPublicarNuevoLibro", "Libro")",
            type: 'POST',
            dataType: 'json',
            data: data,
            success: function (obj) {

                window.location.href = "@Url.Action("IndexAutor","Usuario")";
            }


        })


         }
        })

        }




        function EnviarMensaje() {



          var Mensaje = document.getElementById('mensaje').value;
          var Asunto = document.getElementById('asunto').value;
            var iduser = document.getElementById('Id').value;
            var idlibro = @ViewBag.Idlibro;
            var idproceso = @ViewBag.Idproceso;



            var data = {
                'idemisor': iduser,
                'asunto': Asunto,
                'mensaje': Mensaje


            }
            $.ajax({

                url: "@Url.Action("EnviarMensajeEditorial", "Proceso")",
                type: 'POST',
                dataType: 'json',
                data: data,
                success: function (obj) {


                    window.location.href = "../Proceso/VerProcesoAutor?Idlibro=" + idlibro + "&Idproceso=" + idproceso + "";



                }

            })



        }



</script>








@{


    if (TempData["OKM"] != null)
    {
        <script>

            $('#TempData[OKM]').ready(function () {
                Swal.fire(
                    'Enviado!',
                    'Mensaje ha sido enviado correctamente.',
                    'success'
                )
            });


        </script>

    }


    if (TempData["OKS"] != null)
    {
        <script>

            $('#TempData[OKS]').ready(function () {
                Swal.fire(
                    'Enviado!',
                    'Se ha sido enviado la solicitud correctamente.',
                    'success'
                )
            });


        </script>

    }


    if (TempData["OK"] != null)
    {
        <script>

        $('#TempData[OK]').ready(function () {
            toastr.success('@TempData["OK"]', 'TODO SALIÓ BIEN');
            });


        </script>

    }


    if (TempData["INFO"] != null)
    {
        <script>

            $('#TempData[INFO]').ready(function() {
                toastr.info('@TempData["INFO"]', 'TODO SALIÓ BIEN!!'
              )
          });
        </script>

    }

    if (TempData["ERROR2"] != null)
    {
        <script>

            $('#TempData[ERROR2]').ready(function() {
                toastr.warning('@TempData["ERROR2"]', 'ADVERTENCIA!!'
              )
          });
        </script>

    }

    if (TempData["ERROR"] != null)
    {
        <script>

            $('#TempData[ERROR]').ready(function() {
                toastr.error('@TempData["ERROR"]', 'ERROR!!'
              )
          });
        </script>

    }

    if (TempData["OKE"] != null)
    {
        <script>

            $('#TempData[OKE]').ready(function () {
                Swal.fire(
                    'Eliminado!',
                    'Observación ha sido eliminada.',
                    'success'
                )
            });


        </script>

    }




    if (TempData["OKEA"] != null)
    {
        <script>

            $('#TempData[OKEA]').ready(function () {
                Swal.fire(
                    'Eliminado!',
                    'Autor ha sido eliminado.',
                    'success'
                )
            });


        </script>

    }

    if (TempData["OKE1"] != null)
    {
        <script>

            $('#TempData[OKE1]').ready(function () {
                Swal.fire(
                    'Eliminado!',
                    'Comentario ha sido eliminado.',
                    'success'
                )
            });


        </script>

    }

    if (TempData["OKE2"] != null)
    {
        <script>

            $('#TempData[OKE2]').ready(function () {
                Swal.fire(
                    'Eliminado!',
                    'Documento ha sido eliminado.',
                    'success'
                )
            });


        </script>

    }




}
